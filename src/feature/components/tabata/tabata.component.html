<div class="tabata-workout">
    <h2>Tabata Boxing !</h2>

    <ul class="workout-steps">
        <li *ngFor="let phase of tabataSequence; let index = index" [class.active]="index === currentPhaseIndex"
            [class.completed]="index < currentPhaseIndex">
            <div class="phase-header">
                <span class="phase-number">{{ index + 1 }}</span>
                <span class="phase-title">{{ phase.id }}</span>
            </div>
            <div class="phase-details" *ngIf="index === currentPhaseIndex">
                <!-- <p><b>Rounds :</b> {{ phase.rounds }}</p> -->
                <p *ngFor="let subPhase of phase.phases">
                    <span *ngIf="subPhase.type === 'active'">- Active : {{ subPhase.duration }}s</span>
                    <span *ngIf="subPhase.type === 'active' && subPhase.description">- {{ subPhase.description }}</span>
                    <span *ngIf="subPhase.type === 'rest'">- Rest : {{ subPhase.duration }}s</span>
                </p>
                <p *ngIf="phase.endRest"><b>Rest after phase :</b> {{ phase.endRest }}s</p>

                <!-- Timer Component -->
                <clock [timeLeft]="remainingTime" [rounds]="phase.rounds" [currentRound]="currentRound"
                    [currentPhase]="phase.id" [displayRound]="true">
                </clock>
            </div>
            <!-- Buttons -->
            <div class="control-buttons">
                <button (click)="startTabata()">▶</button>
                <button (click)="stopTabata()">⏹</button>
                <button (click)="moveToNextPhase()">=></button>
            </div>
        </li>
    </ul>
</div>